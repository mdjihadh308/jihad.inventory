<!DOCTYPE html>
<html lang="bn">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>‡¶Æ‡¶ø‡¶≤‡¶® ‡¶á‡¶≤‡ßá‡¶ï‡¶ü‡ßç‡¶∞‡¶ø‡¶ï ‡¶ì‡¶Ø‡¶º‡¶æ‡¶∞‡ßç‡¶ï‡¶∂‡¶™</title>
  
  <style>
    :root {
      --primary: #4f46e5;
      --success: #22c55e;
      --danger: #ef4444;
      --warning: #f59e0b;
      --dark: #1f2937;
      --gray: #6b7280;
      --light-bg: #f8fafc;
    }

    body {
      font-family: 'Segoe UI', 'Noto Sans Bengali', Arial, sans-serif;
      background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
      margin: 0;
      padding: 20px;
      color: var(--dark);
    }

    .container {
      max-width: 1100px;
      margin: 0 auto;
      background: white;
      padding: 30px;
      border-radius: 15px;
      box-shadow: 0 10px 25px rgba(0,0,0,0.1);
    }

    h2 {
      text-align: center;
      color: var(--primary);
      margin-bottom: 25px;
      font-size: 28px;
      border-bottom: 3px solid var(--primary);
      padding-bottom: 15px;
    }

    h3 {
      margin-top: 0;
      color: var(--dark);
      font-size: 18px;
      margin-bottom: 15px;
    }

    /* Product Management Section */
    .product-mgmt {
      background: var(--light-bg);
      padding: 20px;
      border-radius: 10px;
      margin-bottom: 20px;
      border: 1px solid #e5e7eb;
    }

    .mgmt-grid {
      display: grid;
      grid-template-columns: 1fr auto auto;
      gap: 15px;
      align-items: center;
    }

    .mgmt-grid input {
      padding: 12px 15px;
      border: 1px solid #d1d5db;
      border-radius: 8px;
      font-size: 15px;
    }

    .mgmt-btn {
      background: var(--success);
      color: white;
      padding: 12px 20px;
      border: none;
      border-radius: 8px;
      cursor: pointer;
      font-weight: 600;
    }

    .mgmt-btn:hover {
      background: #16a34a;
    }

    /* Form Styles */
    .form-section {
      background: #f8fafc;
      padding: 20px;
      border-radius: 10px;
      margin-bottom: 25px;
      border: 1px solid #e5e7eb;
    }

    .form-grid {
      display: grid;
      grid-template-columns: 2fr 1fr 1fr 1fr auto;
      gap: 15px;
      align-items: end;
    }

    .form-group {
      display: flex;
      flex-direction: column;
      gap: 8px;
    }

    label {
      font-weight: 600;
      color: var(--dark);
      font-size: 14px;
    }

    input, select {
      padding: 12px 15px;
      border: 1px solid #d1d5db;
      border-radius: 8px;
      outline: none;
      transition: all 0.3s;
      font-size: 15px;
      background: white;
    }

    input:focus, select:focus {
      border-color: var(--primary);
      box-shadow: 0 0 0 3px rgba(79, 70, 229, 0.1);
    }

    button {
      cursor: pointer;
      border: none;
      border-radius: 8px;
      font-weight: 600;
      transition: all 0.3s;
      font-size: 15px;
    }

    .add-btn {
      background: var(--primary);
      color: white;
      padding: 12px 25px;
      height: 45px;
    }
    .add-btn:hover {
      background: #4338ca;
      transform: translateY(-2px);
    }

    /* Search & Filter */
    .search-section {
      display: grid;
      grid-template-columns: 2fr 1fr 1fr auto;
      gap: 15px;
      margin-bottom: 25px;
      align-items: end;
    }

    .search-box {
      background: white;
      border: 1px solid #d1d5db;
      border-radius: 8px;
      padding: 0 15px;
      display: flex;
      align-items: center;
    }

    .search-box input {
      border: none;
      padding: 12px 0;
      flex: 1;
    }

    .search-icon {
      color: var(--gray);
      margin-right: 10px;
    }

    .filter-btn {
      background: var(--warning);
      color: white;
      padding: 12px 20px;
    }

    /* Table Styles */
    .table-container {
      overflow-x: auto;
      border: 1px solid #e5e7eb;
      border-radius: 10px;
      margin-top: 20px;
    }

    table {
      width: 100%;
      border-collapse: collapse;
    }

    th {
      background: #f1f5f9;
      text-align: left;
      padding: 15px;
      border-bottom: 2px solid #e5e7eb;
      font-weight: 700;
      color: var(--dark);
    }

    td {
      padding: 15px;
      border-bottom: 1px solid #e5e7eb;
    }

    tr:hover {
      background: #f8fafc;
    }

    .category-badge {
      display: inline-block;
      padding: 4px 12px;
      border-radius: 20px;
      font-size: 13px;
      font-weight: 600;
    }

    .electronics { background: #dbeafe; color: #1e40af; }
    .cable { background: #c7d2fe; color: #3730a3; }
    .box { background: #ddd6fe; color: #5b21b6; }
    .other { background: #e5e7eb; color: #374151; }

    .unit-badge {
      display: inline-block;
      padding: 4px 10px;
      border-radius: 6px;
      font-size: 13px;
      font-weight: 600;
      background: #f3f4f6;
      color: #374151;
      border: 1px solid #d1d5db;
    }

    .action-btns {
      display: flex;
      gap: 10px;
    }

    .action-btns button {
      padding: 8px 15px;
      font-size: 14px;
    }

    .edit-btn { background: var(--warning); color: white; }
    .edit-btn:hover { background: #d97706; }

    .del-btn { background: var(--danger); color: white; }
    .del-btn:hover { background: #dc2626; }

    /* Summary Bar */
    .summary {
      display: flex;
      justify-content: space-between;
      margin-top: 25px;
      padding: 20px;
      background: #f1f5f9;
      border-radius: 10px;
      font-weight: bold;
      border: 1px solid #e5e7eb;
    }

    .summary-item {
      text-align: center;
      flex: 1;
    }

    .summary-number {
      display: block;
      font-size: 28px;
      color: var(--primary);
      margin-top: 5px;
    }

    /* Action Buttons */
    .action-section {
      display: flex;
      gap: 15px;
      margin-top: 25px;
      flex-wrap: wrap;
    }

    .action-btn {
      flex: 1;
      padding: 15px;
      min-width: 150px;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 10px;
    }

    .print-btn { background: var(--dark); color: white; }
    .export-btn { background: var(--success); color: white; }
    .clear-btn { background: var(--danger); color: white; }

    /* Modal */
    .modal {
      display: none;
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0,0,0,0.5);
      align-items: center;
      justify-content: center;
      z-index: 1000;
    }

    .modal-content {
      background: white;
      padding: 30px;
      border-radius: 15px;
      width: 90%;
      max-width: 500px;
      box-shadow: 0 15px 30px rgba(0,0,0,0.2);
    }

    .modal h3 {
      margin-top: 0;
      color: var(--primary);
    }

    .modal-actions {
      display: flex;
      gap: 15px;
      margin-top: 25px;
      justify-content: flex-end;
    }

    /* Product List */
    .product-list {
      background: var(--light-bg);
      padding: 15px;
      border-radius: 8px;
      margin-top: 10px;
      max-height: 150px;
      overflow-y: auto;
    }

    .product-item {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 8px 12px;
      background: white;
      border-radius: 6px;
      margin-bottom: 5px;
      border: 1px solid #e5e7eb;
    }

    .del-product-btn {
      background: var(--danger);
      color: white;
      border: none;
      border-radius: 4px;
      padding: 4px 10px;
      font-size: 12px;
      cursor: pointer;
    }

    /* Responsive */
    @media (max-width: 1024px) {
      .mgmt-grid,
      .form-grid, 
      .search-section {
        grid-template-columns: 1fr;
      }
      
      .action-section {
        flex-direction: column;
      }
      
      .action-btn {
        min-width: auto;
      }
    }

    @media print {
      .product-mgmt,
      .form-section, 
      .search-section, 
      .action-section,
      .action-btns, 
      th:last-child, 
      td:last-child {
        display: none !important;
      }
      
      body { background: white; padding: 0; }
      .container { box-shadow: none; border: none; width: 100%; }
      
      .summary {
        border: 1px solid #000;
        margin-top: 30px;
      }
    }
  </style>
</head>
<body>

<div class="container">
  <h2> ‡¶Æ‡¶ø‡¶≤‡¶® ‡¶á‡¶≤‡ßá‡¶ï‡¶ü‡ßç‡¶∞‡¶ø‡¶ï ‡¶ì‡¶Ø‡¶º‡¶æ‡¶∞‡ßç‡¶ï‡¶∂‡¶™ 
    <br>
    <small>‡¶Æ‡ßã‡¶¨‡¶æ‡¶á‡¶≤: 01712-176706</small>
</h2>

  <!-- Product Management Section -->
  <div class="product-mgmt">
    <h3>üìã ‡¶™‡ßç‡¶∞‡ßã‡¶°‡¶æ‡¶ï‡ßç‡¶ü ‡¶Æ‡ßç‡¶Ø‡¶æ‡¶®‡ßá‡¶ú‡¶Æ‡ßá‡¶®‡ßç‡¶ü</h3>
    <div class="mgmt-grid">
      <input type="text" id="newProductInput" placeholder="‡¶®‡¶§‡ßÅ‡¶® ‡¶™‡ßç‡¶∞‡ßã‡¶°‡¶æ‡¶ï‡ßç‡¶ü‡ßá‡¶∞ ‡¶®‡¶æ‡¶Æ ‡¶≤‡¶ø‡¶ñ‡ßÅ‡¶®...">
      <button class="mgmt-btn" onclick="addProduct()">
        ‚ûï ‡¶™‡ßç‡¶∞‡ßã‡¶°‡¶æ‡¶ï‡ßç‡¶ü ‡¶∏‡¶Ç‡¶∞‡¶ï‡ßç‡¶∑‡¶£ ‡¶ï‡¶∞‡ßÅ‡¶®
      </button>
      <button class="mgmt-btn" style="background: var(--dark);" onclick="showProductList()">
        üìã ‡¶∏‡¶¨ ‡¶™‡ßç‡¶∞‡ßã‡¶°‡¶æ‡¶ï‡ßç‡¶ü ‡¶¶‡ßá‡¶ñ‡ßÅ‡¶®
      </button>
    </div>
    
    <!-- Product List (Hidden by default) -->
    <div id="productListContainer" class="product-list" style="display: none;">
      <h4 style="margin-top: 0;">‡¶∏‡¶∞‡ßç‡¶¨‡¶Æ‡ßã‡¶ü ‡¶™‡ßç‡¶∞‡ßã‡¶°‡¶æ‡¶ï‡ßç‡¶ü: <span id="productCount">0</span></h4>
      <div id="productList"></div>
    </div>
  </div>

  <!-- Add Item Form -->
  <div class="form-section">
    <h3>‚ûï ‡¶®‡¶§‡ßÅ‡¶® ‡¶Ü‡¶á‡¶ü‡ßá‡¶Æ ‡¶Ø‡ßã‡¶ó ‡¶ï‡¶∞‡ßÅ‡¶®</h3>
    <div class="form-grid">
      <div class="form-group">
        <label for="productSelect">‡¶™‡ßç‡¶∞‡ßã‡¶°‡¶æ‡¶ï‡ßç‡¶ü ‡¶®‡¶ø‡¶∞‡ßç‡¶¨‡¶æ‡¶ö‡¶® ‡¶ï‡¶∞‡ßÅ‡¶®</label>
        <select id="productSelect" required>
          <option value="">-- ‡¶™‡ßç‡¶∞‡ßã‡¶°‡¶æ‡¶ï‡ßç‡¶ü ‡¶®‡¶ø‡¶∞‡ßç‡¶¨‡¶æ‡¶ö‡¶® ‡¶ï‡¶∞‡ßÅ‡¶® --</option>
        </select>
      </div>
      
      <div class="form-group">
        <label for="qtyInput">‡¶™‡¶∞‡¶ø‡¶Æ‡¶æ‡¶£</label>
        <input type="number" id="qtyInput" placeholder="‡¶™‡¶∞‡¶ø‡¶Æ‡¶æ‡¶£" min="1" step="0.01" required>
      </div>
      
      <div class="form-group">
        <label for="unitSelect">‡¶á‡¶â‡¶®‡¶ø‡¶ü</label>
        <select id="unitSelect">
          <option value="piece">‡¶™‡¶ø‡¶∏</option>
          <option value="dozen">‡¶°‡¶ú‡¶®</option>
          <option value="packet">‡¶™‡ßç‡¶Ø‡¶æ‡¶ï‡ßá‡¶ü</option>
          <option value="kg">‡¶ï‡ßá‡¶ú‡¶ø</option>
          <option value="meter">‡¶Æ‡¶ø‡¶ü‡¶æ‡¶∞</option>
          <option value="roll">‡¶∞‡ßã‡¶≤</option>
          <option value="set">‡¶∏‡ßá‡¶ü</option>
          <option value="box">‡¶¨‡¶æ‡¶ï‡ßç‡¶∏</option>
        </select>
      </div>
      
      <div class="form-group">
        <label for="categorySelect">‡¶ï‡ßç‡¶Ø‡¶æ‡¶ü‡¶æ‡¶ó‡¶∞‡¶ø</label>
        <select id="categorySelect">
          <option value="electronics">‡¶á‡¶≤‡ßá‡¶ï‡¶ü‡ßç‡¶∞‡¶®‡¶ø‡¶ï‡ßç‡¶∏</option>
          <option value="cable">‡¶ï‡ßç‡¶Ø‡¶æ‡¶¨‡¶≤</option>
          <option value="box">‡¶¨‡¶ï‡ßç‡¶∏</option>
          <option value="other">‡¶Ö‡¶®‡ßç‡¶Ø‡¶æ‡¶®‡ßç‡¶Ø</option>
        </select>
      </div>
      
      <button class="add-btn" onclick="addItem()">
        <span style="font-size: 18px; margin-right: 8px;">+</span> ‡¶Ü‡¶á‡¶ü‡ßá‡¶Æ ‡¶Ø‡ßã‡¶ó ‡¶ï‡¶∞‡ßÅ‡¶®
      </button>
    </div>
  </div>

  <!-- Search & Filter -->
  <div class="search-section">
    <div class="search-box">
      <span class="search-icon">üîç</span>
      <input type="text" id="searchInput" placeholder="‡¶™‡ßç‡¶∞‡ßã‡¶°‡¶æ‡¶ï‡ßç‡¶ü ‡¶ñ‡ßÅ‡¶Å‡¶ú‡ßÅ‡¶®..." onkeyup="filterItems()">
    </div>
    
    <div class="form-group">
      <label for="categoryFilter">‡¶ï‡ßç‡¶Ø‡¶æ‡¶ü‡¶æ‡¶ó‡¶∞‡¶ø ‡¶´‡¶ø‡¶≤‡ßç‡¶ü‡¶æ‡¶∞</label>
      <select id="categoryFilter" onchange="filterItems()">
        <option value="all">‡¶∏‡¶¨ ‡¶ï‡ßç‡¶Ø‡¶æ‡¶ü‡¶æ‡¶ó‡¶∞‡¶ø</option>
        <option value="electronics">‡¶á‡¶≤‡ßá‡¶ï‡¶ü‡ßç‡¶∞‡¶®‡¶ø‡¶ï‡ßç‡¶∏</option>
        <option value="cable">‡¶ï‡ßç‡¶Ø‡¶æ‡¶¨‡¶≤</option>
        <option value="box">‡¶¨‡¶ï‡ßç‡¶∏</option>
        <option value="other">‡¶Ö‡¶®‡ßç‡¶Ø‡¶æ‡¶®‡ßç‡¶Ø</option>
      </select>
    </div>
    
    <button class="filter-btn" onclick="clearFilters()">
      ‡¶´‡¶ø‡¶≤‡ßç‡¶ü‡¶æ‡¶∞ ‡¶∏‡¶∞‡¶æ‡¶®
    </button>
  </div>

  <!-- Table -->
  <div class="table-container">
    <table>
      <thead>
        <tr>
          <th>‡¶™‡ßç‡¶∞‡ßã‡¶°‡¶æ‡¶ï‡ßç‡¶ü‡ßá‡¶∞ ‡¶®‡¶æ‡¶Æ</th>
          <th>‡¶ï‡ßç‡¶Ø‡¶æ‡¶ü‡¶æ‡¶ó‡¶∞‡¶ø</th>
          <th>‡¶™‡¶∞‡¶ø‡¶Æ‡¶æ‡¶£</th>
          <th>‡¶á‡¶â‡¶®‡¶ø‡¶ü</th>
          <th style="text-align: center;">‡¶ï‡¶∞‡ßç‡¶Æ</th>
        </tr>
      </thead>
      <tbody id="listBody">
        <!-- Items will be inserted here -->
      </tbody>
    </table>
  </div>

  <!-- Summary -->
  <div class="summary">
    <div class="summary-item">
      ‡¶Æ‡ßã‡¶ü ‡¶Ü‡¶á‡¶ü‡ßá‡¶Æ
      <span class="summary-number" id="totalItems">0</span>
    </div>
    <div class="summary-item">
      ‡¶Æ‡ßã‡¶ü ‡¶™‡¶∞‡¶ø‡¶Æ‡¶æ‡¶£
      <span class="summary-number" id="totalQty">0</span>
    </div>
    <div class="summary-item">
      ‡¶ï‡ßç‡¶Ø‡¶æ‡¶ü‡¶æ‡¶ó‡¶∞‡¶ø ‡¶∏‡¶Ç‡¶ñ‡ßç‡¶Ø‡¶æ
      <span class="summary-number" id="totalCategories">0</span>
    </div>
  </div>

  <!-- Action Buttons -->
  <div class="action-section">
    <button class="action-btn print-btn" onclick="window.print()">
      üñ®Ô∏è ‡¶™‡ßç‡¶∞‡¶ø‡¶®‡ßç‡¶ü ‡¶ï‡¶∞‡ßÅ‡¶®
    </button>
    <button class="action-btn export-btn" onclick="exportToExcel()">
      üìä ‡¶è‡¶ï‡ßç‡¶∏‡ßá‡¶≤‡ßá ‡¶∞‡¶™‡ßç‡¶§‡¶æ‡¶®‡¶ø ‡¶ï‡¶∞‡ßÅ‡¶®
    </button>
    <button class="action-btn clear-btn" onclick="showClearModal()">
      üóëÔ∏è ‡¶∏‡¶¨ ‡¶Æ‡ßÅ‡¶õ‡ßá ‡¶´‡ßá‡¶≤‡ßÅ‡¶®
    </button>
  </div>
</div>

<!-- Clear Confirmation Modal -->
<div class="modal" id="clearModal">
  <div class="modal-content">
    <h3>‡¶®‡¶ø‡¶∂‡ßç‡¶ö‡¶ø‡¶§ ‡¶ï‡¶∞‡ßÅ‡¶®</h3>
    <p>‡¶Ü‡¶™‡¶®‡¶ø ‡¶ï‡¶ø ‡¶®‡¶ø‡¶∂‡ßç‡¶ö‡¶ø‡¶§ ‡¶Ø‡ßá ‡¶Ü‡¶™‡¶®‡¶ø ‡¶∏‡¶ï‡¶≤ ‡¶á‡¶®‡¶≠‡ßá‡¶®‡ßç‡¶ü‡¶∞‡¶ø ‡¶Ü‡¶á‡¶ü‡ßá‡¶Æ ‡¶Æ‡ßÅ‡¶õ‡ßá ‡¶´‡ßá‡¶≤‡¶§‡ßá ‡¶ö‡¶æ‡¶®? ‡¶è‡¶á ‡¶ï‡¶æ‡¶ú‡¶ü‡¶ø ‡¶™‡ßÇ‡¶∞‡ßç‡¶¨‡¶æ‡¶¨‡¶∏‡ßç‡¶•‡¶æ‡ßü ‡¶´‡ßá‡¶∞‡¶æ‡¶®‡ßã ‡¶Ø‡¶æ‡¶¨‡ßá ‡¶®‡¶æ‡•§</p>
    <div class="modal-actions">
      <button onclick="closeModal()" style="background: var(--gray); color: white; padding: 10px 20px;">
        ‡¶¨‡¶æ‡¶§‡¶ø‡¶≤ ‡¶ï‡¶∞‡ßÅ‡¶®
      </button>
      <button onclick="clearAll()" style="background: var(--danger); color: white; padding: 10px 20px;">
        ‡¶Æ‡ßÅ‡¶õ‡ßá ‡¶´‡ßá‡¶≤‡ßÅ‡¶®
      </button>
    </div>
  </div>
</div>

<script>
  // Initialize data
  let productsRepo = JSON.parse(localStorage.getItem("productsRepo")) || [];
  let tableData = JSON.parse(localStorage.getItem("currentTableData")) || [];
  
  // Category names in Bengali
  const categoryNames = {
    "electronics": "‡¶á‡¶≤‡ßá‡¶ï‡¶ü‡ßç‡¶∞‡¶®‡¶ø‡¶ï‡ßç‡¶∏",
    "cable": "‡¶ï‡ßç‡¶Ø‡¶æ‡¶¨‡¶≤",
    "box": "‡¶¨‡¶ï‡ßç‡¶∏",
    "other": "‡¶Ö‡¶®‡ßç‡¶Ø‡¶æ‡¶®‡ßç‡¶Ø"
  };
  
  // Unit names in Bengali
  const unitNames = {
    "piece": "‡¶™‡¶ø‡¶∏",
    "dozen": "‡¶°‡¶ú‡¶®",
    "packet": "‡¶™‡ßç‡¶Ø‡¶æ‡¶ï‡ßá‡¶ü",
    "kg": "‡¶ï‡ßá‡¶ú‡¶ø",
    "meter": "‡¶Æ‡¶ø‡¶ü‡¶æ‡¶∞",
    "roll": "‡¶∞‡ßã‡¶≤",
    "set": "‡¶∏‡ßá‡¶ü",
    "box": "‡¶¨‡¶æ‡¶ï‡ßç‡¶∏"
  };

  // Initial Load
  window.onload = () => {
    updateProductDropdown();
    renderTable();
    updateSummary();
  };

  // Update product dropdown
  function updateProductDropdown() {
    const select = document.getElementById("productSelect");
    select.innerHTML = '<option value="">-- ‡¶™‡ßç‡¶∞‡ßã‡¶°‡¶æ‡¶ï‡ßç‡¶ü ‡¶®‡¶ø‡¶∞‡ßç‡¶¨‡¶æ‡¶ö‡¶® ‡¶ï‡¶∞‡ßÅ‡¶® --</option>';
    
    // Sort products alphabetically
    productsRepo.sort();
    
    productsRepo.forEach(product => {
      const option = new Option(product, product);
      select.add(option);
    });
    
    // Update product count
    document.getElementById("productCount").innerText = productsRepo.length;
  }

  // Add new product to repo
  function addProduct() {
    const name = document.getElementById("newProductInput").value.trim();
    
    if (!name) {
      alert("‡¶¶‡ßü‡¶æ ‡¶ï‡¶∞‡ßá ‡¶™‡ßç‡¶∞‡ßã‡¶°‡¶æ‡¶ï‡ßç‡¶ü‡ßá‡¶∞ ‡¶®‡¶æ‡¶Æ ‡¶≤‡¶ø‡¶ñ‡ßÅ‡¶®!");
      return;
    }

    if (!productsRepo.includes(name)) {
      productsRepo.push(name);
      localStorage.setItem("productsRepo", JSON.stringify(productsRepo));
      updateProductDropdown();
      
      // Clear input
      document.getElementById("newProductInput").value = "";
      
      // Auto-select the new product
      document.getElementById("productSelect").value = name;
      document.getElementById("qtyInput").focus();
      
      alert(`${name} ‡¶™‡ßç‡¶∞‡ßã‡¶°‡¶æ‡¶ï‡ßç‡¶ü ‡¶∏‡¶´‡¶≤‡¶≠‡¶æ‡¶¨‡ßá ‡¶∏‡¶Ç‡¶∞‡¶ï‡ßç‡¶∑‡¶£ ‡¶ï‡¶∞‡¶æ ‡¶π‡ßü‡ßá‡¶õ‡ßá!`);
    } else {
      alert("‡¶è‡¶á ‡¶™‡ßç‡¶∞‡ßã‡¶°‡¶æ‡¶ï‡ßç‡¶ü‡¶ü‡¶ø ‡¶á‡¶§‡¶ø‡¶Æ‡¶ß‡ßç‡¶Ø‡ßá ‡¶∏‡¶Ç‡¶∞‡¶ï‡ßç‡¶∑‡¶£ ‡¶ï‡¶∞‡¶æ ‡¶Ü‡¶õ‡ßá!");
    }
  }

  // Show/Hide product list
  function showProductList() {
    const container = document.getElementById("productListContainer");
    const listDiv = document.getElementById("productList");
    
    if (container.style.display === "none") {
      // Show product list
      listDiv.innerHTML = "";
      
      if (productsRepo.length === 0) {
        listDiv.innerHTML = '<p style="text-align: center; color: var(--gray);">‡¶ï‡ßã‡¶®‡ßã ‡¶™‡ßç‡¶∞‡ßã‡¶°‡¶æ‡¶ï‡ßç‡¶ü ‡¶∏‡¶Ç‡¶∞‡¶ï‡ßç‡¶∑‡¶£ ‡¶ï‡¶∞‡¶æ ‡¶®‡ßá‡¶á</p>';
      } else {
        productsRepo.forEach((product, index) => {
          const itemDiv = document.createElement("div");
          itemDiv.className = "product-item";
          itemDiv.innerHTML = `
            <span>${index + 1}. ${product}</span>
            <button class="del-product-btn" onclick="deleteProduct('${product}')">‡¶Æ‡ßÅ‡¶õ‡ßÅ‡¶®</button>
          `;
          listDiv.appendChild(itemDiv);
        });
      }
      
      container.style.display = "block";
    } else {
      container.style.display = "none";
    }
  }

  // Delete a product from repo
  function deleteProduct(productName) {
    if (confirm(`‡¶Ü‡¶™‡¶®‡¶ø ‡¶ï‡¶ø "${productName}" ‡¶™‡ßç‡¶∞‡ßã‡¶°‡¶æ‡¶ï‡ßç‡¶ü‡¶ü‡¶ø ‡¶Æ‡ßÅ‡¶õ‡ßá ‡¶´‡ßá‡¶≤‡¶§‡ßá ‡¶ö‡¶æ‡¶®?\n\n‡¶¶‡ßç‡¶∞‡¶∑‡ßç‡¶ü‡¶¨‡ßç‡¶Ø: ‡¶è‡¶á ‡¶™‡ßç‡¶∞‡ßã‡¶°‡¶æ‡¶ï‡ßç‡¶ü‡¶ü‡¶ø ‡¶á‡¶®‡¶≠‡ßá‡¶®‡ßç‡¶ü‡¶∞‡¶ø‡¶§‡ßá‡¶ì ‡¶•‡¶æ‡¶ï‡¶≤‡ßá ‡¶∏‡ßá‡¶ü‡¶ø ‡¶•‡ßá‡¶ï‡ßá ‡¶Æ‡ßÅ‡¶õ‡ßá ‡¶Ø‡¶æ‡¶¨‡ßá‡•§`)) {
      // Remove from productsRepo
      productsRepo = productsRepo.filter(p => p !== productName);
      localStorage.setItem("productsRepo", JSON.stringify(productsRepo));
      
      // Remove from inventory if exists
      tableData = tableData.filter(item => item.name !== productName);
      localStorage.setItem("currentTableData", JSON.stringify(tableData));
      
      updateProductDropdown();
      renderTable();
      showProductList(); // Refresh the list
      
      alert(`${productName} ‡¶™‡ßç‡¶∞‡ßã‡¶°‡¶æ‡¶ï‡ßç‡¶ü ‡¶∏‡¶´‡¶≤‡¶≠‡¶æ‡¶¨‡ßá ‡¶Æ‡ßÅ‡¶õ‡ßá ‡¶´‡ßá‡¶≤‡¶æ ‡¶π‡ßü‡ßá‡¶õ‡ßá!`);
    }
  }

  // Add new item to inventory
  function addItem() {
    const name = document.getElementById("productSelect").value;
    const qty = parseFloat(document.getElementById("qtyInput").value);
    const unit = document.getElementById("unitSelect").value;
    const category = document.getElementById("categorySelect").value;

    if (!name) {
      alert("‡¶¶‡ßü‡¶æ ‡¶ï‡¶∞‡ßá ‡¶è‡¶ï‡¶ü‡¶ø ‡¶™‡ßç‡¶∞‡ßã‡¶°‡¶æ‡¶ï‡ßç‡¶ü ‡¶®‡¶ø‡¶∞‡ßç‡¶¨‡¶æ‡¶ö‡¶® ‡¶ï‡¶∞‡ßÅ‡¶®!");
      return;
    }
    
    if (!qty || qty <= 0) {
      alert("‡¶¶‡ßü‡¶æ ‡¶ï‡¶∞‡ßá ‡¶∏‡¶†‡¶ø‡¶ï ‡¶™‡¶∞‡¶ø‡¶Æ‡¶æ‡¶£ ‡¶≤‡¶ø‡¶ñ‡ßÅ‡¶®!");
      return;
    }

    // Check if product exists in repo
    if (!productsRepo.includes(name)) {
      alert("‡¶è‡¶á ‡¶™‡ßç‡¶∞‡ßã‡¶°‡¶æ‡¶ï‡ßç‡¶ü‡¶ü‡¶ø ‡¶∏‡¶Ç‡¶∞‡¶ï‡ßç‡¶∑‡¶£ ‡¶ï‡¶∞‡¶æ ‡¶®‡ßá‡¶á! ‡¶™‡ßç‡¶∞‡¶•‡¶Æ‡ßá ‡¶™‡ßç‡¶∞‡ßã‡¶°‡¶æ‡¶ï‡ßç‡¶ü ‡¶Æ‡ßç‡¶Ø‡¶æ‡¶®‡ßá‡¶ú‡¶Æ‡ßá‡¶®‡ßç‡¶ü ‡¶•‡ßá‡¶ï‡ßá ‡¶™‡ßç‡¶∞‡ßã‡¶°‡¶æ‡¶ï‡ßç‡¶ü ‡¶∏‡¶Ç‡¶∞‡¶ï‡ßç‡¶∑‡¶£ ‡¶ï‡¶∞‡ßÅ‡¶®‡•§");
      return;
    }

    // Add to table data
    tableData.push({
      id: Date.now() + Math.random(),
      name,
      qty,
      unit,
      category
    });
    
    saveAndRender();
    
    // Clear inputs
    document.getElementById("qtyInput").value = "";
    document.getElementById("unitSelect").value = "piece";
    document.getElementById("categorySelect").value = "electronics";
    
    // Focus on quantity input
    document.getElementById("qtyInput").focus();
  }

  // Render table with items
  function renderTable(items = tableData) {
    const tbody = document.getElementById("listBody");
    tbody.innerHTML = "";
    
    if (items.length === 0) {
      tbody.innerHTML = `
        <tr>
          <td colspan="5" style="text-align: center; padding: 40px; color: var(--gray);">
            üìù ‡¶ï‡ßã‡¶®‡ßã ‡¶Ü‡¶á‡¶ü‡ßá‡¶Æ ‡¶™‡¶æ‡¶ì‡ßü‡¶æ ‡¶Ø‡¶æ‡ßü‡¶®‡¶ø‡•§ ‡¶®‡¶§‡ßÅ‡¶® ‡¶Ü‡¶á‡¶ü‡ßá‡¶Æ ‡¶Ø‡ßã‡¶ó ‡¶ï‡¶∞‡ßÅ‡¶®‡•§
          </td>
        </tr>
      `;
      return;
    }
    
    items.forEach((item) => {
      const categoryClass = item.category || "other";
      const categoryName = categoryNames[categoryClass] || "‡¶Ö‡¶®‡ßç‡¶Ø‡¶æ‡¶®‡ßç‡¶Ø";
      const unitName = unitNames[item.unit] || item.unit;
      
      const row = `
        <tr>
          <td style="font-weight: 600;">${item.name}</td>
          <td>
            <span class="category-badge ${categoryClass}">
              ${categoryName}
            </span>
          </td>
          <td style="font-weight: bold; color: var(--primary);">${item.qty}</td>
          <td>
            <span class="unit-badge">${unitName}</span>
          </td>
          <td style="text-align: center;">
            <div class="action-btns">
              <button class="edit-btn" onclick="editItem(${item.id})">
                ‡¶∏‡¶Æ‡ßç‡¶™‡¶æ‡¶¶‡¶®‡¶æ
              </button>
              <button class="del-btn" onclick="deleteItem(${item.id})">
                ‡¶Æ‡ßÅ‡¶õ‡ßÅ‡¶®
              </button>
            </div>
          </td>
        </tr>
      `;
      tbody.insertAdjacentHTML('beforeend', row);
    });
    
    updateSummary();
  }

  // Delete item
  function deleteItem(id) {
    tableData = tableData.filter(item => item.id !== id);
    saveAndRender();
  }

  // Edit item
  function editItem(id) {
    const item = tableData.find(i => i.id === id);
    
    // Set values for editing
    document.getElementById("productSelect").value = item.name;
    document.getElementById("qtyInput").value = item.qty;
    document.getElementById("unitSelect").value = item.unit || "piece";
    document.getElementById("categorySelect").value = item.category || "electronics";
    
    // Delete the item from list
    deleteItem(id);
    
    // Focus on quantity input
    document.getElementById("qtyInput").focus();
  }

  // Filter items based on search and category
  function filterItems() {
    const searchText = document.getElementById("searchInput").value.toLowerCase();
    const selectedCategory = document.getElementById("categoryFilter").value;
    
    const filtered = tableData.filter(item => {
      const matchesSearch = item.name.toLowerCase().includes(searchText);
      const matchesCategory = selectedCategory === "all" || item.category === selectedCategory;
      
      return matchesSearch && matchesCategory;
    });
    
    renderTable(filtered);
  }

  // Clear all filters
  function clearFilters() {
    document.getElementById("searchInput").value = "";
    document.getElementById("categoryFilter").value = "all";
    renderTable();
  }

  // Update summary statistics
  function updateSummary() {
    const totalItems = tableData.length;
    const totalQty = tableData.reduce((sum, item) => sum + item.qty, 0);
    
    // Count unique categories
    const categories = new Set(tableData.map(item => item.category));
    const totalCategories = categories.size;
    
    document.getElementById("totalItems").innerText = totalItems;
    document.getElementById("totalQty").innerText = totalQty.toFixed(2);
    document.getElementById("totalCategories").innerText = totalCategories;
  }

  // Export to Excel/CSV
  function exportToExcel() {
    if (tableData.length === 0) {
      alert("‡¶∞‡¶™‡ßç‡¶§‡¶æ‡¶®‡¶ø ‡¶ï‡¶∞‡¶æ‡¶∞ ‡¶Æ‡¶§‡ßã ‡¶ï‡ßã‡¶®‡ßã ‡¶°‡ßá‡¶ü‡¶æ ‡¶®‡ßá‡¶á!");
      return;
    }
    
    // Create CSV content
    let csvContent = "data:text/csv;charset=utf-8,\uFEFF";
    csvContent += "‡¶™‡ßç‡¶∞‡ßã‡¶°‡¶æ‡¶ï‡ßç‡¶ü‡ßá‡¶∞ ‡¶®‡¶æ‡¶Æ,‡¶ï‡ßç‡¶Ø‡¶æ‡¶ü‡¶æ‡¶ó‡¶∞‡¶ø,‡¶™‡¶∞‡¶ø‡¶Æ‡¶æ‡¶£,‡¶á‡¶â‡¶®‡¶ø‡¶ü\n";
    
    tableData.forEach(item => {
      const categoryName = categoryNames[item.category] || "‡¶Ö‡¶®‡ßç‡¶Ø‡¶æ‡¶®‡ßç‡¶Ø";
      const unitName = unitNames[item.unit] || item.unit;
      csvContent += `${item.name},${categoryName},${item.qty},${unitName}\n`;
    });
    
    // Create download link
    const encodedUri = encodeURI(csvContent);
    const link = document.createElement("a");
    link.setAttribute("href", encodedUri);
    link.setAttribute("download", `inventory_${new Date().toLocaleDateString()}.csv`);
    document.body.appendChild(link);
    
    // Trigger download
    link.click();
    document.body.removeChild(link);
    
    alert("‡¶°‡ßá‡¶ü‡¶æ ‡¶∏‡¶´‡¶≤‡¶≠‡¶æ‡¶¨‡ßá CSV ‡¶´‡¶æ‡¶á‡¶≤‡ßá ‡¶∞‡¶™‡ßç‡¶§‡¶æ‡¶®‡¶ø ‡¶ï‡¶∞‡¶æ ‡¶π‡ßü‡ßá‡¶õ‡ßá!");
  }

  // Show clear confirmation modal
  function showClearModal() {
    if (tableData.length === 0) {
      alert("‡¶Æ‡ßÅ‡¶õ‡ßá ‡¶´‡ßá‡¶≤‡¶æ‡¶∞ ‡¶Æ‡¶§‡ßã ‡¶ï‡ßã‡¶®‡ßã ‡¶Ü‡¶á‡¶ü‡ßá‡¶Æ ‡¶®‡ßá‡¶á!");
      return;
    }
    
    document.getElementById("clearModal").style.display = "flex";
  }

  // Close modal
  function closeModal() {
    document.getElementById("clearModal").style.display = "none";
  }

  // Clear all items
  function clearAll() {
    tableData = [];
    saveAndRender();
    closeModal();
    alert("‡¶∏‡¶ï‡¶≤ ‡¶Ü‡¶á‡¶ü‡ßá‡¶Æ ‡¶∏‡¶´‡¶≤‡¶≠‡¶æ‡¶¨‡ßá ‡¶Æ‡ßÅ‡¶õ‡ßá ‡¶´‡ßá‡¶≤‡¶æ ‡¶π‡ßü‡ßá‡¶õ‡ßá!");
  }

  // Save data to localStorage and re-render
  function saveAndRender() {
    localStorage.setItem("currentTableData", JSON.stringify(tableData));
    renderTable();
  }

  // Keyboard shortcuts
  document.addEventListener('keydown', function(event) {
    // Ctrl + Enter to add item
    if (event.ctrlKey && event.key === 'Enter') {
      addItem();
    }
    
    // Escape to clear filters
    if (event.key === 'Escape') {
      clearFilters();
    }
    
    // Ctrl + E to export
    if (event.ctrlKey && event.key === 'e') {
      event.preventDefault();
      exportToExcel();
    }
    
    // Tab key navigation
    if (event.key === 'Tab') {
      // Focus management for better UX
      const activeElement = document.activeElement;
      const allInputs = document.querySelectorAll('input, select, button');
      const currentIndex = Array.from(allInputs).indexOf(activeElement);
      
      if (currentIndex !== -1 && !event.shiftKey) {
        event.preventDefault();
        const nextIndex = (currentIndex + 1) % allInputs.length;
        allInputs[nextIndex].focus();
      }
    }
  });

  // Enter key in new product input
  document.getElementById('newProductInput').addEventListener('keypress', function(e) {
    if (e.key === 'Enter') {
      addProduct();
    }
  });

  // Enter key in quantity input
  document.getElementById('qtyInput').addEventListener('keypress', function(e) {
    if (e.key === 'Enter') {
      addItem();
    }
  });
</script>

</body>
</html>
